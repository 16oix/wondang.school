<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ê´€ë¦¬ì</title>
<link rel="stylesheet" href="style.css">
</head>
<body class="glass">

<header>
  <div class="logo-text">ì›ë‹¹ì¤‘í•™êµ ìµëª… ê²Œì‹œíŒ</div>
</header>

<button class="btn small" onclick="goBack()">â¬… ë’¤ë¡œê°€ê¸°</button>
<h1>ğŸ›  ê´€ë¦¬ì ëª¨ë“œ</h1>

<h3>í†µê³„</h3>
<div id="stats"></div>

<h3>ì„¤ì •</h3>
<label>ë‹¤í¬ëª¨ë“œ</label>
<button class="btn" onclick="toggleDarkMode()">í† ê¸€</button>
<label>ì•„ë°”íƒ€ íƒ€ì…</label>
<select id="avatar-type" class="input">
  <option value="circle">ì›í˜•</option>
  <option value="pattern">íŒ¨í„´</option>
  <option value="pixel">í”½ì…€</option>
</select>

<h3>ê²Œì‹œê¸€ ê´€ë¦¬</h3>
<div id="admin-posts"></div>

<script src="avatar.js"></script>
<script src="theme.js"></script>
<script src="app.js"></script>
<script>
let pw = prompt("ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸:");
if(pw!=="admin123"){ alert("ì ‘ê·¼ ë¶ˆê°€"); location.href="index.html"; }

let posts = JSON.parse(localStorage.getItem("posts")) || [];
const statsDiv = document.getElementById("stats");
const adminDiv = document.getElementById("admin-posts");

let v = JSON.parse(localStorage.getItem("visits")) || {};
let html="";
for(let day in v){ html += `<div>${day}: ${v[day]}íšŒ ë°©ë¬¸</div>`; }
statsDiv.innerHTML = html;

const select = document.getElementById("avatar-type");
select.value = localStorage.getItem("avatarType") || "circle";
select.addEventListener("change", ()=>{
  localStorage.setItem("avatarType", select.value);
  alert("ì„¤ì • ì €ì¥ë¨");
});

function renderAdminPosts(){
  adminDiv.innerHTML = "";
  posts.slice().reverse().forEach(p=>{
    adminDiv.innerHTML += `<div class="glass">
      ${p.avatar} <b>${p.title}</b> - ${p.date}<br>
      <button class="btn small danger" onclick="deleteAdminPost(${p.id})">ì‚­ì œ</button>
    </div>`;
  });
}

function deleteAdminPost(id){
  const pw = prompt("ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸:");
  if(pw!=="admin123") return alert("ë¹„ë°€ë²ˆí˜¸ í‹€ë¦¼");
  posts = posts.filter(x=>x.id!==Number(id));
  localStorage.setItem("posts", JSON.stringify(posts));
  renderAdminPosts();
}

renderAdminPosts();
</script>
</body>
</html>
